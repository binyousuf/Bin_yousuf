import{j as n}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.BVOCwoKb.js";import{g as C,S as E}from"./ScrollToPlugin.BtQFNwPr.js";C.registerPlugin(E);const D=({projects:l,emaarProjects:y,hmrProjects:T})=>{const[d,p]=r.useState(0),[c,b]=r.useState(!1),R=r.useRef(null),m=r.useRef([]),a=r.useRef(null),f=r.useRef(null),v=r.useRef(!1),w=r.useCallback(e=>{f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{p(e)},100)},[]),j=r.useCallback(()=>{if(v.current)return;const e=window.location.hash;e&&requestAnimationFrame(()=>{const t=document.querySelector(e);if(t){const s=parseInt(t.dataset.projectIndex||"0");isNaN(s)||(p(s),t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}))}}),v.current=!0},[]),I=r.useCallback(()=>{a.current&&a.current.disconnect();const e={root:null,rootMargin:"-20% 0px -20% 0px",threshold:[.3,.7]};a.current=new IntersectionObserver(t=>{if(c)return;let s=0,i=null;if(t.forEach(o=>{o.intersectionRatio>s&&(s=o.intersectionRatio,i=o)}),i&&i.isIntersecting){const o=i.target,x=o.dataset.projectId,N=parseInt(o.dataset.projectIndex||"0");if(!isNaN(N)){const S=`#project-${x}`;window.location.hash!==S&&history.replaceState(null,"",S),w(N)}}},e),m.current.forEach(t=>{t&&a.current&&a.current.observe(t)})},[c,w]),u=r.useCallback(e=>{if(e<0||e>=m.current.length||c)return;const t=m.current[e];t&&(b(!0),C.to(window,{duration:1.2,scrollTo:{y:t,offsetY:0},ease:"power2.inOut",onComplete:()=>{setTimeout(()=>{b(!1)},200)}}))},[c]),h=r.useCallback(e=>{const s=e.target.closest('a[href^="#"]');if(!s)return;e.preventDefault();const i=s.getAttribute("href")?.substring(1);if(i==="emaar")u(0);else if(i==="hmr"){const o=l.findIndex(x=>x.location==="HMR");o!==-1&&u(o)}},[l,u]),g=r.useCallback(e=>{c||(e.key==="ArrowDown"&&d<l.length-1?(e.preventDefault(),u(d+1)):e.key==="ArrowUp"&&d>0&&(e.preventDefault(),u(d-1)))},[d,l.length,u,c]),k=r.useCallback(e=>`/projects/${e.name.toLowerCase().replace(/[\s&]/g,"-").replace(/--+/g,"-")}`,[]);return r.useEffect(()=>{j();const e=setTimeout(()=>{I()},100);return()=>{clearTimeout(e)}},[j,I]),r.useEffect(()=>(document.addEventListener("click",h),document.addEventListener("keydown",g),()=>{document.removeEventListener("click",h),document.removeEventListener("keydown",g)}),[h,g]),r.useEffect(()=>()=>{a.current&&a.current.disconnect(),f.current&&clearTimeout(f.current)},[]),n.jsx("div",{ref:R,className:"w-full min-h-screen overflow-x-hidden relative",id:"projectsListContainer",children:l.map((e,t)=>n.jsxs("section",{ref:s=>{s&&(m.current[t]=s)},className:`
            min-h-screen w-full flex items-center justify-center relative
            ${t%2===1?"bg-neutral-50":"bg-white"}
            transition-colors duration-300
          `,id:`project-${e.id}`,"data-project-id":e.id,"data-project-name":e.name,"data-project-location":e.location.toLowerCase(),"data-project-index":t,children:[n.jsxs("div",{className:`w-full max-w-[1400px] mx-auto px-4 py-[60px] \r
            grid grid-cols-1 lg:grid-cols-[1fr_2fr] gap-[60px] items-center`,children:[n.jsxs("div",{className:"flex flex-col gap-5 text-left lg:text-left",children:[n.jsx("span",{className:"text-sm text-neutral-500 font-medium",children:e.number}),n.jsx("h2",{className:"text-clamp-title- text-7xl font-semibold leading-tight text-neutral-800 m-0",children:e.name}),n.jsx("p",{className:"text-lg text-neutral-600 font-normal",children:e.location})]}),n.jsxs("a",{href:k(e),className:`w-full h-[70vh] overflow-hidden -rounded-2xl \r
                -shadow-[0_40px_80px_rgba(0,0,0,0.15)] relative block \r
                no-underline text-inherit transition-all duration-500\r
                ease-out group hover:-translate-y-2 \r
                hover:shadow-[0_50px_100px_rgba(0,0,0,0.2)]\r
                focus:outline-none focus:ring-4 focus:ring-blue-500/20`,children:[n.jsx("img",{src:e.image.src,alt:e.name,className:`w-full h-full object-cover transition-transform \r
                  duration-700 ease-out group-hover:scale-105`,loading:t<2?"eager":"lazy"}),n.jsx("div",{className:"absolute inset-0 bg-black/0 transition-colors duration-300 group-hover:bg-black/10"})]}),n.jsx("div",{className:"col-span-full text-center mt-10 hidden lg:block",children:n.jsx("a",{href:k(e),className:"btn-secondary transition-all duration-300",children:"View Project Details"})})]}),n.jsxs("div",{className:"absolute bottom-8 right-8 text-sm text-neutral-400 font-medium",children:[String(t+1).padStart(2,"0")," / ",String(l.length).padStart(2,"0")]})]},e.id))})};export{D as default};
